.globl fib	

fib:	
	pushl %ebx		#4
	pushl %edi		#8
	subl $4, %esp		#12
	movl 16(%esp), %edi	#int di = n;	//if (n<2) return 1;
    	movl $1, %eax	#int a = i;	//return fib(n-1)+fib(n-2);
	cmpl $2, %edi		#if(di < 2) goto E;
	jl E
	decl %edi		#di--;
	movl %edi, (%esp)
	call fib		#a = fib(di);
	movl %eax, %ebx		#int b = a;
	decl %edi		#di--;
	movl %edi, (%esp)
	call fib		#a = fib(di);
	addl %ebx, %eax		#a = a + b;
E:	addl $4, %esp
	popl %edi
	popl %ebx
	ret			#return a;
				#}
